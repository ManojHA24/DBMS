create database BookDealer;
show databases;
use BookDealer;
CREATE TABLE AUTHOR(
AUTHOR_ID INT,
ANAME VARCHAR(30),
ACITY VARCHAR(30),
ACOUNTRY VARCHAR(30),
PRIMARY KEY(AUTHOR_ID));
CREATE TABLE PUBLISHER(
PUBLISHER_ID INT,
PNAME VARCHAR(20),
PCITY VARCHAR(30),
PCOUNTRY VARCHAR(30),
PRIMARY KEY(PUBLISHER_ID));
CREATE TABLE CATALOG(
BOOK_ID INT,
TITLE VARCHAR(30),
AUTHOR_ID INT,
PUBLISHER_ID INT,
CATEGORY_ID INT,
CYEAR INT,
PRICE INT,
PRIMARY KEY(BOOK_ID),
FOREIGN KEY(AUTHOR_ID) REFERENCES AUTHOR(AUTHOR_ID) ON DELETE CASCADE,
FOREIGN KEY(PUBLISHER_ID) REFERENCES PUBLISHER(PUBLISHER_ID) ON DELETE CASCADE,
FOREIGN KEY(CATEGORY_ID) REFERENCES CATEGORY(CATEGORY_ID) ON DELETE CASCADE);
CREATE TABLE CATEGORY(
CATEGORY_ID INT,
DESCRIPTION VARCHAR(30),
PRIMARY KEY(CATEGORY_ID));
CREATE TABLE ORDER_DETAILS(
ORDER_NO INT,
BOOK_ID INT,
QUANTITY INT,
PRIMARY KEY(ORDER_NO),
FOREIGN KEY(BOOK_ID) REFERENCES CATALOG(BOOK_ID) ON DELETE CASCADE);
SHOW TABLES;
insert into AUTHOR values(1001,'TERAS CHAN','CA','USA');
insert into AUTHOR values(1002,'STEVENS','ZOMBI','UGANDA');
insert into AUTHOR values(1003,'M MANO','CAIR','CANADA');
insert into AUTHOR values(1004,'KARTHIK B.P.','NEW YORK','USA');
insert into AUTHOR values(1005,'WILLIAM STALLINGS','LAS VEGAS','USA');
COMMIT;
select * from AUTHOR;
insert into PUBLISHER values(1,'PEARSON','NEW YORK','USA');
insert into PUBLISHER values(2,'EEE','NEW SOUTH VALES','USA');
insert into PUBLISHER values(3,'PHI','NEW DELHI','INDIA');
insert into PUBLISHER values(4,'WILLEY','BERLIN','GERMANY');
insert into PUBLISHER values(5,'MGH','NEW YORK','USA');
COMMIT;
select * from PUBLISHER;
INSERT INTO CATEGORY VALUES(1001,'COMPUTER SCIENCE');
INSERT INTO CATEGORY VALUES(1002,'ALGORITHM DESIGN');
INSERT INTO CATEGORY VALUES(1003,'ELECTRONICS');
INSERT INTO CATEGORY VALUES(1004,'PROGRAMMING');
INSERT INTO CATEGORY VALUES(1005,'OPERATING SYSTEMS');
COMMIT;
select * from CATEGORY;
INSERT INTO CATALOG VALUES(11,'UNIX System Prg',1001,1,1001,2000,251);
insert into catalog values(12,'DS',1002,2,1003, 2001 ,425);
insert into catalog values(13,'LD',1003,3,1002, 1999 ,225);
insert into catalog values(14,'server prg',1004,4,1004, 2001 ,333);
insert into catalog values(15,'linux os',1005,5,1005, 2003 ,326);
insert into catalog values(16,'c++ bible',1005,5,1001, 2000 ,526);
insert into catalog values(17,'cobol HB',1005,4,1001, 2000 ,658);
COMMIT;
select * from catalog;
insert into order_details values(1,11,5);
insert into order_details values(2,12,8);
insert into order_details values(3,13,15);
insert into order_details values(4,14,22);
insert into order_details values(5,15,3);
insert into order_details values(12,17,10);
commit;
select * from order_details;
SELECT A.ANAME FROM AUTHOR A,CATALOG C,ORDER_DETAILS O 
WHERE A.AUTHOR_ID=C.AUTHOR_ID AND C.BOOK_ID=O.BOOK_ID
AND O.QUANTITY=(SELECT MAX(QUANTITY) FROM ORDER_DETAILS);

SELECT AUTHOR_ID, ANAME, ACITY, ACOUNTRY FROM AUTHOR
WHERE AUTHOR_ID IN(SELECT AUTHOR_ID FROM CATALOG 
WHERE cYEAR = 2000 GROUP BY AUTHOR_ID  HAVING COUNT(AUTHOR_ID) >=2   );

UPDATE CATALOG SET PRICE=(PRICE+PRICE*0.1) WHERE PUBLISHER_ID=5;
